<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<title>Olympus Server Manager</title>
<link rel="icon" type="image/png" href="favicon.ico" />

	
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	
	
	<link type="text/css" href="css/smoothness/jquery-ui-1.8.13.custom.css" rel="Stylesheet" />	
	<script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.8.13.custom.min.js"></script>
		
	<script type="text/javascript" src="js/jquery.hotkeys.js"></script>
	
	<script type="text/javascript" src="js/raphael/raphael-min.js"></script>
	<script type="text/javascript" src="js/graphael/g.raphael-min.js"></script>
	<script type="text/javascript" src="js/graphael/g.pie-min.js"></script>
	<script type="text/javascript" src="js/graphael/g.bar-min.js"></script>
	<script type="text/javascript" src="js/graphael/g.line-min.js"></script>
	<script type="text/javascript" src="js/graphael/g.dot-min.js"></script>
	
		
	<script type="text/javascript">	
	//=== SERVER URL			===/
	serverURL = "http://127.0.0.1/";
	currentNumPlugins = 0;
	currentServerId = 0;
	
	//show plugins(remote_server_id_number)
	function show_plugins(id_num){
		currentServerId = id_num;
		 $.ajax({
		   type: "GET",
		   url: serverURL,
		   data: "p"+id_num,
		   success: function(data){
		   	var plugins = data.split('&');
		   	
		   	//=== Create Running Plugins Grid	===//
		   	$("#running_plugins").append('<!--PLUGINS GRID-->');
			for(var i = 0; i < plugins.length; i++)
			{
				var plugin = plugins[i].split(',');
				  var plugin_name = plugin[0];
				  var plugin_num_args = plugin[1];
				  var plugin_id = plugin[2];
				$("#running_plugins").append('<div class="plugin_container_base" id="plugin_'+plugin_id+'">');
				$("#running_plugins").append('<a href="#" onclick="open_dialog('+plugin_id+')" ><img src="plugins/'+plugin_name+'.png"></a>');
				$("#running_plugins").append('</div>');
			}
			$("#running_plugins").append('<div class="clear"></div>');
			$("#running_plugins").append('<!--END PLUGINS GRID-->');
			//=== END PLUGINS GRID	===//		   	
		   	
		   	//=== Create Plugins		===//
		   	for(var j = 0; i < plugins.length; i++)
		   	{
		   		var plugin = plugins[i].split(',');
				  var plugin_name = plugin[0];
				  var plugin_num_args = plugin[1];
				  var plugin_id = plugin[2];
		   		$("#running_plugins").append('<!--BEGIN Plugin '+plugin_id+'-->');
		   		
		   		//--Plugin Scripts	--//
		   		$("#running_plugins").append('<script type="text/javascript">');
		   		$("#running_plugins").append('//=== plugin '+plugin_id+' dialog properties   ===//');	
		   		$("#running_plugins").append('$(\'#plugin_'+plugin_id+'_dialog\').dialog({autoOpen:false,show:"scale",width:300,height:300,maxWidth:500,maxHeight:500,scroll:true,position:['+(j*10)+','(j*10)'],});');
		   		$("#running_plugins").append('//=== end plugin '+plugin_id+' dialog properties ===//');
		   		//$("#running_plugins").append('//=== Plugin '+plugin_id+' LOADER		===//');
		   		//--------------------//
		   		$("#running_plugins").append('<div id="plugin_'+plugin_id+'_dialog" class="dlg" title="'+plugin_name+'">');
		   		$('#plugin_'+plugin_id+'_dialog').append('<button id="plugin_'+plugin_id+'_load_button" class="load_button" onclick="plugin_'+plugin_id+'_loader()">Load Plugin Data &rarr;</button>');
		   		$('#plugin_'+plugin_id+'_dialog').append('<p><br /></p>');
		   		$('#plugin_'+plugin_id+'_dialog').append('</div>');	
		   			   		
		   		$("#running_plugins").append('<!--END Plugin '+plugin_id+'-->');
		   	}
		   	
		   	//=== End Create Plugins	===//
		   	
		   },
		   error: function(html){$("#running_plugins").html("<p>Error loading data</p>")}
		 });
		 $('#currentServ').html("Plugins running on Server "+id_num);	
		 $('#running_plugins').slideDown();	
		 $('#running_plugins').effect("highlight", {color: "#1F497D"}, 500);
	 	
	}
	
	function open_dialog(plugin_num)
	{
		$('#plugin_'+plugin_num+'_dialog').dialog('open');
	}	
	function close_dialog(plugin_num)
	{
		$('#plugin_'+plugin_num+'_dialog').dialog('close');
	}	



	</script>

	

</head>
<body>
	<div id="wrap" >
		<div class="full">
			<h1>Olympus Server Manager</h1>
		</div>
		
		<div class="full" id="top_nav">	
			<ul>
				<li><a href="index.html">Dashboard</a></li>
				<li><a href="index.html">Configuration</a></li>
				<li><a href="OlympusPresentation.swf">Slideshow</a></li>	
				<li><button onclick="show_plugins(2)">CLICK</button></li>
			</ul>
		</div>
		
		<div class="small_content" id="global_plugins">
			<h3>Installed Global Plugins</h3>
			<ul id="global_plugins_data">
				<img src="cssimg/loading3.gif" alt="loading" />
				<script type="text/javascript">	
					$.ajax({
					   type: "POST",
					   url: serverURL,
					   data: "gp",
					   success: function(data){
					   	$("#global_plugins_data").html(html);
					   },
					   error: function(html){$("#global_plugins_data").html("<p>Error loading data</p>")}
					 });	
				</script>
			</ul>
		</div>
		
		<div class="large_content" id="server_list">
			<h3>Remote Server List</h3>
			<ul id="server_list_data">
				<img src="cssimg/loading3.gif" alt="loading" />
				<script type="text/javascript">
					$.ajax({
					   type: "POST",
					   url: serverURL,
					   data: "s",
					   success: function(data){ 	
					   	var servers = data.split('&');
						for(var i = 0; i < servers.length; i++)
						{
							var server = servers[i].split(',');
							  var server_name = server[0]
							  var server_ip = server[1];
							  var server_id = server[2];
							var gen_link = '<li><a href="#" id="'+server_id+'" onclick="show_plugins('+server_id+')">'+server_name+'</a> - <span class="italics">'+server_ip+'</span></li>';
							$("#server_list_data").html(gen_link);
						}
					   },
					   error: function(html){$("#server_list_data").html("<p>Error loading data</p>")}
					 });		
				</script>
			</ul>			
		</div>
		
		<div class="clear">&nbsp;</div>
		
		<div class="full_box" id="running_plugins">	
			<h3 id="currentServ"></h3>
			<img src="cssimg/loading3.gif" alt="loading" />
			

			
		</div>		
		
		<div class="clear">&nbsp;</div>	
		
		<div id="footer">
			<ul>
				<li><a href="#">About</a></li>
				<li><a href="#">License</a></li>
				<li><a href="#">Documentation</a></li>
			</ul>
		</div>

		<div class="clear">&nbsp;</div>
	</div><!--END_GRID-->
</body>
</html>
